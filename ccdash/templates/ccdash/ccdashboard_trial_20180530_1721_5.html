{% extends "base.html" %} {% load staticfiles %} {% block title %}Dashboard{% endblock %} 
{% block custcss %} {% endblock %} 
{% block main_content %}
<!-- Content area -->

    <div class="row">
        <!-- TESTING -->
        <div class="col-lg-4">
            <div class="panel panel-flat">
                <div class="table-responsive">
                    <table class="table datatable-responsive" id="dash-header-table">
                        <tbody>
                            <tr>
                                <td class="text-center">
                                    <div class="row">
                                        <span style="font-size: 75px !important;">{{ total_projects_ds }}</span>
                                    </div>
                                    <div class="row">
                                        <span class="text-muted text-size-small">Total Projects</span>
                                    </div>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="col-lg-8">
            <div class="panel panel-flat">
                <div class="table-responsive">
                    <table class="table datatable-responsive" id="dash-header-table">
                        <tbody>
                            <tr>
                                <td class="text-center">
                                    <div class="row">
                                        <span style="font-size: 75px !important;">{{ total_impacts_ds }}</span>
                                    </div>
                                    <div class="row">
                                        <span class="text-muted text-size-small">Total Active Impacts</span>
                                    </div>
                                </td>
<!--                             </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="panel panel-flat">
                <div class="table-responsive">
                    <table class="table datatable-responsive" id="dash-header-table">
                        <tbody>
                            <tr> -->
                                <td class="text-center">
                                    <div class="row">
                                        <span style="font-size: 75px !important;">{{ total_confirmed_impacts_ds }}</span>
                                    </div>
                                    <div class="row">
                                        <span class="text-muted text-size-small">Total Confirmed Impacts</span>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
</div>




    <!-- Main charts -->
    <div class="row">
        <!-- TESTING -->
        <div class="col-lg-4">
            <div class="panel panel-flat">
                <div class="table-responsive">
                    <table class="table datatable-responsive" id="dash-header-table">
                        <tbody>
                            <tr>
                                <td>
                                        <ul class="list-inline text-center">
                                            <li>
                                                    <div id="chart_7_responsive"> 
                                                        <div id="chart_7" class="position-relative" name="chart71"></div>
                                                   </div> 
                                            </li>
                                            <li>
                                                    <div class="text-left">
                                                        <h5 class="text-semibold no-margin">Project Status</h5>
                                                        <ul class="list-inline list-inline-condensed no-margin">
                                                            <li>
                                                                <span class="text-muted">{{ project_status.project_status_msg }}
                                                                    <small class="{{ project_status.project_status_class}} text-size-base">
                                                                        <i class="{{ project_status.project_status_arrow }}"></i>
                                                                        {{ project_status.project_status_perc }}</small></span>
                                                                <!--span class="text-muted">Severe 213 <small class="text-danger text-size-base"><i class="icon-arrow-down12"></i> (-16.2%)</small></span-->
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </li>
                                            </ul>
                             
                               
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>


        <div class="col-lg-8">
            <div class="panel panel-flat">
                <div class="table-responsive">
                    <table class="table datatable-responsive" id="dash-header-table">
                        <tbody>
                            <tr>
                                                <td>
                                                    <ul class="list-inline text-center" style="margin-top: 22px;">
                                                        <li>
                                                    <div id="chart_3_responsive">
                                                        <div id="chart_3" class="text-center position-relative" name="chart31"></div>
                                                    </div>
                                                    </li>
                                                    <li>
                                                    <div class="text-left">
                                                        <h5 class="text-semibold no-margin">Impact Levels</h5>
                                                        <ul class="list-inline list-inline-condensed no-margin">
                                                            <li>
                                                                <span class="text-muted">{{ project_status.impact_level_msg }} </span>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </li>
                                            </ul>
                  
     
                                                </td>
                                                <td>

                                                    <ul class="list-inline text-center">
                                                        <li>
                                                    <div id="chart_5_responsive">
                                                        <div id="chart_5" class="text-center position-relative" name="chart51"></div>
                                                    </div>
                                                    </li>
                                                    <li>

                                                    <div class="text-left">
                                                        <h5 class="text-semibold no-margin">Impacts Over Time</h5>
                                                        <ul class="list-inline list-inline-condensed no-margin">
                                                            <li>
                                                                <span class="text-muted">{{ project_status.impacts_otime_msg }} <small class="{{ project_status.impacts_otime_class}} text-size-base"><i class="{{ project_status.impacts_otime_arrow }}"></i> {{ project_status.impacts_otime_perc }}</small></span>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </li>
                                            </ul>
 
                                            </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-flat">
                <div class="panel-heading">
                    <h6 class="panel-title">Scores at each hierarchy level</h6>
                </div>
                <div id="chart_1_responsive">
                    <div id="chart_1" class="text-center position-relative" name="chart1"></div>
                </div>
            </div>
        </div>
        <div class="col-lg-12">
            <div class="panel panel-flat">
                <div class="panel-heading">
                    <h6 class="panel-title">Initiatives by sponsor area</h6>
                </div>
                <div id="chart_2_responsive">
                    <div id="chart_2" class="text-center position-relative" name="chart2"></div>
                </div>
            </div>
        </div>
    </div>
    {% endblock %}
    <!--Parent core js override-->
    {% block chartcode%}
    <script src="{% static '/assets/js/base/vega/vega.min.js' %}"></script>
    <script src="{% static '/assets/js/base/vega/vega_tooltip.min.js' %}"></script>
    <script src="{% static '/assets/js/base/vegadash.js' %}"></script>
    <script type="text/javascript">
    var handler = new vegaTooltip.Handler();

    vegadash.adduris({ "element": "#chart_1", "uri": "{% url 'vconfig' req_id='config' data_id='levels' para='[1,2,3,4]' %}", "inp_type": "width", "height_mod": 0, "width_mod": .80, });
    vegadash.adduris({ "element": "#chart_2", "uri": "{% url 'vconfig' req_id='config' data_id='sponsor' para='{"geo":"max"}' %}", "inp_type": "width", "height_mod": 0, "width_mod": .95, });
    vegadash.adduris({ "element": "#chart_3", "uri": "{% url 'vconfig' req_id='config' data_id='impact' para='NA' %}", "inp_type": "both", "height_mod": 0.5, "width_mod": .50, });

    vegadash.adduris({ "element": "#chart_4", "uri": "{% url 'vconfig' req_id='config' data_id='impact' para='NA' %}", "inp_type": "both", "height_mod": 0.5, "width_mod": .50, });
    vegadash.adduris({ "element": "#chart_5", "uri": "{% url 'vconfig' req_id='config' data_id='iotime' para='NA' %}", "inp_type": "width", "height_mod": 0.5, "width_mod": .80, });
    vegadash.adduris({ "element": "#chart_6", "uri": "{% url 'vconfig' req_id='config' data_id='impact' para='NA' %}", "inp_type": "both", "height_mod": 0.5, "width_mod": .50, });
    vegadash.adduris({ "element": "#chart_7", "uri": "{% url 'vconfig' req_id='config' data_id='pstatus' para='NA' %}", "inp_type": "width", "height_mod": 0, "width_mod": .80, });


    vegadash.vegarefresh();
    </script>
    {% endblock %}